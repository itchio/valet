mod winhook;
use nj_sys::*;

macro_rules! fixup {
    ($name: expr) => {{
        unsafe {
            winhook::hook(stringify!($name), $name as *const std::ffi::c_void);
        }
    }};
}

pub(crate) fn process() {
    fixup!(napi_acquire_threadsafe_function);
    fixup!(napi_add_env_cleanup_hook);
    fixup!(napi_add_finalizer);
    fixup!(napi_adjust_external_memory);
    fixup!(napi_async_destroy);
    fixup!(napi_async_init);
    fixup!(napi_call_function);
    fixup!(napi_call_threadsafe_function);
    fixup!(napi_cancel_async_work);
    fixup!(napi_close_callback_scope);
    fixup!(napi_close_escapable_handle_scope);
    fixup!(napi_close_handle_scope);
    fixup!(napi_coerce_to_bool);
    fixup!(napi_coerce_to_number);
    fixup!(napi_coerce_to_object);
    fixup!(napi_coerce_to_string);
    fixup!(napi_create_array);
    fixup!(napi_create_array_with_length);
    fixup!(napi_create_arraybuffer);
    fixup!(napi_create_async_work);
    fixup!(napi_create_buffer);
    fixup!(napi_create_buffer_copy);
    fixup!(napi_create_dataview);
    fixup!(napi_create_date);
    fixup!(napi_create_double);
    fixup!(napi_create_error);
    fixup!(napi_create_external);
    fixup!(napi_create_external_arraybuffer);
    fixup!(napi_create_external_buffer);
    fixup!(napi_create_function);
    fixup!(napi_create_int32);
    fixup!(napi_create_int64);
    fixup!(napi_create_object);
    fixup!(napi_create_promise);
    fixup!(napi_create_range_error);
    fixup!(napi_create_reference);
    fixup!(napi_create_string_latin1);
    fixup!(napi_create_string_utf8);
    fixup!(napi_create_string_utf16);
    fixup!(napi_create_symbol);
    fixup!(napi_create_threadsafe_function);
    fixup!(napi_create_type_error);
    fixup!(napi_create_typedarray);
    fixup!(napi_create_uint32);
    fixup!(napi_define_class);
    fixup!(napi_define_properties);
    fixup!(napi_delete_async_work);
    fixup!(napi_delete_element);
    fixup!(napi_delete_property);
    fixup!(napi_delete_reference);
    fixup!(napi_escape_handle);
    fixup!(napi_fatal_error);
    fixup!(napi_fatal_exception);
    fixup!(napi_get_and_clear_last_exception);
    fixup!(napi_get_array_length);
    fixup!(napi_get_arraybuffer_info);
    fixup!(napi_get_boolean);
    fixup!(napi_get_buffer_info);
    fixup!(napi_get_cb_info);
    fixup!(napi_get_dataview_info);
    fixup!(napi_get_date_value);
    fixup!(napi_get_element);
    fixup!(napi_get_global);
    fixup!(napi_get_last_error_info);
    fixup!(napi_get_named_property);
    fixup!(napi_get_new_target);
    fixup!(napi_get_node_version);
    fixup!(napi_get_null);
    fixup!(napi_get_property);
    fixup!(napi_get_property_names);
    fixup!(napi_get_prototype);
    fixup!(napi_get_reference_value);
    fixup!(napi_get_threadsafe_function_context);
    fixup!(napi_get_typedarray_info);
    fixup!(napi_get_undefined);
    fixup!(napi_get_uv_event_loop);
    fixup!(napi_get_value_bool);
    fixup!(napi_get_value_double);
    fixup!(napi_get_value_external);
    fixup!(napi_get_value_int32);
    fixup!(napi_get_value_int64);
    fixup!(napi_get_value_string_latin1);
    fixup!(napi_get_value_string_utf8);
    fixup!(napi_get_value_string_utf16);
    fixup!(napi_get_value_uint32);
    fixup!(napi_get_version);
    fixup!(napi_has_element);
    fixup!(napi_has_named_property);
    fixup!(napi_has_own_property);
    fixup!(napi_has_property);
    fixup!(napi_instanceof);
    fixup!(napi_is_array);
    fixup!(napi_is_arraybuffer);
    fixup!(napi_is_buffer);
    fixup!(napi_is_dataview);
    fixup!(napi_is_date);
    fixup!(napi_is_error);
    fixup!(napi_is_exception_pending);
    fixup!(napi_is_promise);
    fixup!(napi_is_typedarray);
    fixup!(napi_make_callback);
    fixup!(napi_module_register);
    fixup!(napi_new_instance);
    fixup!(napi_open_callback_scope);
    fixup!(napi_open_escapable_handle_scope);
    fixup!(napi_open_handle_scope);
    fixup!(napi_queue_async_work);
    fixup!(napi_ref_threadsafe_function);
    fixup!(napi_reference_ref);
    fixup!(napi_reference_unref);
    fixup!(napi_reject_deferred);
    fixup!(napi_release_threadsafe_function);
    fixup!(napi_remove_env_cleanup_hook);
    fixup!(napi_remove_wrap);
    fixup!(napi_resolve_deferred);
    fixup!(napi_run_script);
    fixup!(napi_set_element);
    fixup!(napi_set_named_property);
    fixup!(napi_set_property);
    fixup!(napi_strict_equals);
    fixup!(napi_throw);
    fixup!(napi_throw_error);
    fixup!(napi_throw_range_error);
    fixup!(napi_throw_type_error);
    fixup!(napi_typeof);
    fixup!(napi_unref_threadsafe_function);
    fixup!(napi_unwrap);
    fixup!(napi_wrap);
}
